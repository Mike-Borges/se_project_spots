!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input-error_active",errorClass:"modal__error"},t=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);t.classList.remove(o.inputErrorClass),n.textContent=""},o=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?(t.classList.add(o.inactiveButtonClass),t.disabled=!0):(t.classList.remove(o.inactiveButtonClass),t.disabled=!1)},n=document.querySelector(".profile__edit-btn"),r=document.querySelector("#edit-profile-modal"),a=(r.querySelector(".modal__close-btn"),document.forms["edit-form"]),s=a.elements["profile-name-input"],c=r.querySelector("#profile-description-input"),l=document.querySelector(".profile__new-post-btn"),i=document.querySelector("#new-post-modal"),d=(i.querySelector(".modal__close-btn"),document.forms["new-post-form"]),u=i.querySelector(".modal__submit-btn"),m=i.querySelector("#card-image-input"),p=i.querySelector("#card-caption-input"),f=document.querySelector("#preview-modal"),_=(f.querySelector(".modal__close-btn_type_preview"),f.querySelector(".modal__image")),y=f.querySelector(".modal__caption"),v=document.querySelector(".profile__name"),S=document.querySelector(".profile__description"),g=document.querySelector("#card-template").content.querySelector(".card"),b=document.querySelector(".cards__list");function q(e){e.classList.add("modal_is-opened"),document.addEventListener("keydown",h)}function w(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",h)}function h(e){if("Escape"===e.key){const e=document.querySelector(".modal.modal_is-opened");e&&w(e)}}function E(e,t="prepend"){const o=function(e){let t=g.cloneNode(!0);const o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const r=t.querySelector(".card__like-btn");return r.addEventListener("click",()=>{r.classList.toggle("card__like-btn_active")}),t.querySelector(".card__delete-btn").addEventListener("click",()=>{t.remove(),t=null}),n.addEventListener("click",()=>{_.src=e.link,_.alt=e.name,y.textContent=e.name,q(f)}),t}(e);b[t](o)}var L;n.addEventListener("click",function(){s.value=v.textContent,c.value=S.textContent,resetValidation(a,[s,c],e),q(r)}),document.querySelectorAll(".modal__close-btn").forEach(e=>{const t=e.closest(".modal");e.addEventListener("click",()=>w(t))}),l.addEventListener("click",function(){q(i)}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("mousedown",t=>{(t.target===e||t.target.classList.contains("modal"))&&w(e)})}),a.addEventListener("submit",function(e){e.preventDefault(),v.textContent=s.value,S.textContent=c.value,w(r)}),d.addEventListener("submit",function(e){e.preventDefault(),E({name:p.value,link:m.value}),e.target.reset(),w(i),disableButton(u)}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(function(e){E(e,"append")}),L=e,Array.from(document.querySelectorAll(L.formSelector)).forEach(e=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach(s=>{s.addEventListener("input",function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);t.classList.add(n.inputErrorClass),r.textContent=o})(e,o,o.validationMessage,n)})(e,s,n),o(r,a,n)})}),e.addEventListener("reset",()=>{((e,o,n)=>{o.forEach(o=>{t(e,o,n)})})(e,r,n),((e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)})(a,n)})})(e,L)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBY2hFLEVBQVVULE1BT3hCNEUsQ0FBa0I5RSxFQUFRRSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnRuX2luYWN0aXZlXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXG59O1xuXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuXG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yRWwudGV4dENvbnRlbnQgPSBcIlwiO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b25FbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59O1xuXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn07XG5cbmNvbnN0IHJlc2V0VmFsaWRhdGlvbiA9IChmb3JtRWwsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXQsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbiAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCAoKSA9PiB7XG4gICAgcmVzZXRWYWxpZGF0aW9uKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpO1xuICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzctcGhvdG8tYnktZ3JpZmZpbi13b29sZHJpZGdlLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzEtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5dO1xuXG5jb25zdCBlZGl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LXByb2ZpbGUtbW9kYWxcIik7XG5jb25zdCBlZGl0UHJvZmlsZUNsb3NlQnRuID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtZm9ybVwiXTtcbmNvbnN0IGVkaXRQcm9maWxlTmFtZUlucHV0ID0gZWRpdFByb2ZpbGVGb3JtLmVsZW1lbnRzW1wicHJvZmlsZS1uYW1lLWlucHV0XCJdO1xuY29uc3QgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZWRpdFByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25ldy1wb3N0LWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmV3LXBvc3QtbW9kYWxcIik7XG5jb25zdCBuZXdQb3N0Q2xvc2VCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgbmV3UG9zdEZvcm0gPSBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wb3N0LWZvcm1cIl07XG5jb25zdCBuZXdQb3N0U3VibWl0QnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5jb25zdCBjYXJkSW1hZ2VJbnB1dCA9IG5ld1Bvc3RNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtaW1hZ2UtaW5wdXRcIik7XG5jb25zdCBjYXJkQ2FwdGlvbklucHV0ID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1jYXB0aW9uLWlucHV0XCIpO1xuXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fY2xvc2UtYnRuX3R5cGVfcHJldmlld1wiXG4pO1xuY29uc3QgcHJldmlld0ltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3Q2FwdGlvbkVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5cbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIilcbiAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGxldCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRUaXRsZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gIGNhcmRJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuICBjYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICBjb25zdCBjYXJkTGlrZUJ0bkVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgY2FyZExpa2VCdG5FbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnRuRWwuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgfSk7XG5cbiAgY29uc3QgY2FyZERlbGV0ZUJ0bkVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuICBjYXJkRGVsZXRlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICBjYXJkRWxlbWVudCA9IG51bGw7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICAgIHByZXZpZXdJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3Q2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XG59XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudDtcbiAgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBlZGl0UHJvZmlsZUZvcm0sXG4gICAgW2VkaXRQcm9maWxlTmFtZUlucHV0LCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXRdLFxuICAgIHNldHRpbmdzXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuXG5jb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5cbmNsb3NlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgY29uc3QgbW9kYWwgPSBidXR0b24uY2xvc2VzdChcIi5tb2RhbFwiKTtcblxuICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNsb3NlTW9kYWwobW9kYWwpKTtcbn0pO1xuXG5uZXdQb3N0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIG9wZW5Nb2RhbChuZXdQb3N0TW9kYWwpO1xufSk7XG5cbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5cbm1vZGFscy5mb3JFYWNoKChtb2RhbCkgPT4ge1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChldnQpID0+IHtcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gbW9kYWwgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGVLZXkoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBpZiAob3BlbmVkTW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Bvc3RTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IGlucHV0VmFsdWVzID0ge1xuICAgIG5hbWU6IGNhcmRDYXB0aW9uSW5wdXQudmFsdWUsXG4gICAgbGluazogY2FyZEltYWdlSW5wdXQudmFsdWUsXG4gIH07XG5cbiAgcmVuZGVyQ2FyZChpbnB1dFZhbHVlcyk7XG5cbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xuXG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgZGlzYWJsZUJ1dHRvbihuZXdQb3N0U3VibWl0QnRuKTtcbn1cblxuZWRpdFByb2ZpbGVGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlRWRpdFByb2ZpbGVTdWJtaXQpO1xuXG5uZXdQb3N0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RTdWJtaXQpO1xuXG5pbml0aWFsQ2FyZHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICByZW5kZXJDYXJkKGl0ZW0sIFwiYXBwZW5kXCIpO1xufSk7XG5cbmZ1bmN0aW9uIHJlbmRlckNhcmQoaXRlbSwgbWV0aG9kID0gXCJwcmVwZW5kXCIpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZHNMaXN0W21ldGhvZF0oY2FyZEVsZW1lbnQpO1xufVxuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiJdLCJuYW1lcyI6WyJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwiZXJyb3JFbCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJhZGQiLCJkaXNhYmxlZCIsImVkaXRQcm9maWxlQnRuIiwiZG9jdW1lbnQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVGb3JtIiwiZm9ybXMiLCJlZGl0UHJvZmlsZU5hbWVJbnB1dCIsImVsZW1lbnRzIiwiZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwibmV3UG9zdEJ0biIsIm5ld1Bvc3RNb2RhbCIsIm5ld1Bvc3RGb3JtIiwibmV3UG9zdFN1Ym1pdEJ0biIsImNhcmRJbWFnZUlucHV0IiwiY2FyZENhcHRpb25JbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdJbWFnZUVsIiwicHJldmlld0NhcHRpb25FbCIsInByb2ZpbGVOYW1lRWwiLCJwcm9maWxlRGVzY3JpcHRpb25FbCIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjYXJkc0xpc3QiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVFc2NhcGVLZXkiLCJjbG9zZU1vZGFsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIm9wZW5lZE1vZGFsIiwicmVuZGVyQ2FyZCIsIml0ZW0iLCJtZXRob2QiLCJjYXJkRWxlbWVudCIsImRhdGEiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGVFbCIsImNhcmRJbWFnZUVsIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJjYXJkTGlrZUJ0bkVsIiwidG9nZ2xlIiwiZ2V0Q2FyZEVsZW1lbnQiLCJ2YWx1ZSIsInJlc2V0VmFsaWRhdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwiY2xvc2VzdCIsInRhcmdldCIsImNvbnRhaW5zIiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsImRpc2FibGVCdXR0b24iLCJBcnJheSIsImZyb20iLCJzZXRFdmVudExpc3RlbmVycyIsImNoZWNrSW5wdXRWYWxpZGl0eSIsInNob3dJbnB1dEVycm9yIiwiZXJyb3JNc2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=